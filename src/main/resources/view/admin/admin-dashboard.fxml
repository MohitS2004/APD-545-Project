<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.blueharbor.hotel.controller.AdminDashboardController"
            stylesheets="@../../styles/app.css">
    <top>
        <ToolBar>
            <Label text="Blue Harbor Ops Console" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
            <Pane HBox.hgrow="ALWAYS"/>
            <Button text="New Reservation" onAction="#openManualReservation"/>
            <Button text="Export Daily Report" onAction="#exportDailyReport"/>
            <Button text="Logout" onAction="#logout"/>
        </ToolBar>
    </top>
    <center>
        <TabPane fx:id="dashboardTabs">
            <tabs>
                <Tab text="Reservations" closable="false">
                    <VBox spacing="8">
                        <padding><Insets top="16" right="16" bottom="16" left="16"/></padding>
                        <HBox spacing="8">
                            <TextField fx:id="searchField" promptText="Search guest, phone or confirmation"/>
                            <DatePicker fx:id="fromDatePicker" promptText="From"/>
                            <DatePicker fx:id="toDatePicker" promptText="To"/>
                            <Button text="Search" onAction="#runReservationSearch"/>
                        </HBox>
                        <TableView fx:id="reservationTable" prefHeight="300">
                            <columns>
                                <TableColumn fx:id="confirmationColumn" text="Confirmation" prefWidth="140"/>
                                <TableColumn fx:id="guestColumn" text="Guest" prefWidth="180"/>
                                <TableColumn fx:id="dateColumn" text="Dates" prefWidth="140"/>
                                <TableColumn fx:id="roomsColumn" text="Rooms" prefWidth="80"/>
                                <TableColumn fx:id="statusColumn" text="Status" prefWidth="90"/>
                                <TableColumn fx:id="balanceColumn" text="Balance" prefWidth="90"/>
                            </columns>
                        </TableView>
                        <HBox spacing="8">
                            <Button text="Modify" onAction="#openReservationDetail"/>
                            <Button text="Cancel" onAction="#cancelReservation"/>
                            <Button text="Checkout" onAction="#checkoutReservation"/>
                        </HBox>
                    </VBox>
                </Tab>
                <Tab text="Payments" closable="false">
                    <VBox spacing="8">
                        <padding><Insets top="16" right="16" bottom="16" left="16"/></padding>
                        <TableView fx:id="paymentTable">
                            <columns>
                                <TableColumn fx:id="paymentTimeColumn" text="Timestamp" prefWidth="150"/>
                                <TableColumn fx:id="paymentReservationColumn" text="Reservation" prefWidth="120"/>
                                <TableColumn fx:id="paymentMethodColumn" text="Method" prefWidth="90"/>
                                <TableColumn fx:id="paymentAmountColumn" text="Amount" prefWidth="90"/>
                                <TableColumn fx:id="paymentActorColumn" text="Actor" prefWidth="120"/>
                            </columns>
                        </TableView>
                    </VBox>
                </Tab>
                <Tab text="Waitlist" closable="false">
                    <VBox spacing="8">
                        <padding><Insets top="16" right="16" bottom="16" left="16"/></padding>
                        <TableView fx:id="waitlistTable">
                            <columns>
                                <TableColumn fx:id="waitlistGuestColumn" text="Guest" prefWidth="160"/>
                                <TableColumn fx:id="waitlistRoomColumn" text="Room Type" prefWidth="120"/>
                                <TableColumn fx:id="waitlistDatesColumn" text="Dates" prefWidth="140"/>
                                <TableColumn fx:id="waitlistStatusColumn" text="Status" prefWidth="100"/>
                            </columns>
                        </TableView>
                        <HBox spacing="8">
                            <Button text="Add Entry" onAction="#addWaitlistEntry"/>
                            <Button text="Convert to Reservation" onAction="#convertWaitlist"/>
                            <Button text="Notify" onAction="#notifyWaitlist"/>
                        </HBox>
                    </VBox>
                </Tab>
                <Tab text="Feedback" closable="false">
                    <VBox spacing="8">
                        <padding><Insets top="16" right="16" bottom="16" left="16"/></padding>
                        <HBox spacing="8">
                            <ChoiceBox fx:id="ratingFilter" prefWidth="150"/>
                            <DatePicker fx:id="feedbackFromDate"/>
                            <DatePicker fx:id="feedbackToDate"/>
                            <Button text="Export CSV" onAction="#exportFeedbackCsv"/>
                        </HBox>
                        <TableView fx:id="feedbackTable">
                            <columns>
                                <TableColumn fx:id="feedbackGuestColumn" text="Guest" prefWidth="160"/>
                                <TableColumn fx:id="feedbackRatingColumn" text="Rating" prefWidth="80"/>
                                <TableColumn fx:id="feedbackCommentColumn" text="Comment" prefWidth="300"/>
                                <TableColumn fx:id="feedbackDateColumn" text="Date" prefWidth="120"/>
                            </columns>
                        </TableView>
                    </VBox>
                </Tab>
                <Tab text="Reports" closable="false">
                    <SplitPane>
                        <VBox spacing="8">
                            <padding><Insets top="16" right="16" bottom="16" left="16"/></padding>
                            <Label text="Revenue"/>
                            <TableView fx:id="revenueTable">
                                <columns>
                                    <TableColumn fx:id="revenuePeriodColumn" text="Period" prefWidth="120"/>
                                    <TableColumn fx:id="revenueCountColumn" text="Reservations" prefWidth="110"/>
                                    <TableColumn fx:id="revenueSubtotalColumn" text="Subtotal" prefWidth="100"/>
                                    <TableColumn fx:id="revenueTaxColumn" text="Tax" prefWidth="90"/>
                                    <TableColumn fx:id="revenueDiscountColumn" text="Discounts" prefWidth="100"/>
                                    <TableColumn fx:id="revenueTotalColumn" text="Total" prefWidth="100"/>
                                </columns>
                            </TableView>
                            <HBox spacing="8">
                                <Button text="CSV" onAction="#exportRevenueCsv"/>
                                <Button text="PDF" onAction="#exportRevenuePdf"/>
                            </HBox>
                        </VBox>
                        <VBox spacing="8">
                            <padding><Insets top="16" right="16" bottom="16" left="16"/></padding>
                            <Label text="Occupancy"/>
                            <TableView fx:id="occupancyTable">
                                <columns>
                                    <TableColumn fx:id="occupancyDateColumn" text="Date" prefWidth="120"/>
                                    <TableColumn fx:id="occupancyAvailableColumn" text="Rooms Available" prefWidth="130"/>
                                    <TableColumn fx:id="occupancyOccupiedColumn" text="Rooms Occupied" prefWidth="120"/>
                                    <TableColumn fx:id="occupancyPercentColumn" text="Occupancy %" prefWidth="110"/>
                                </columns>
                            </TableView>
                            <HBox spacing="8">
                                <Button text="CSV" onAction="#exportOccupancyCsv"/>
                                <Button text="PDF" onAction="#exportOccupancyPdf"/>
                            </HBox>
                        </VBox>
                    </SplitPane>
                </Tab>
                <Tab text="Activity Log" closable="false">
                    <VBox spacing="8">
                        <padding><Insets top="16" right="16" bottom="16" left="16"/></padding>
                        <TableView fx:id="activityTable">
                            <columns>
                                <TableColumn fx:id="activityTimeColumn" text="Timestamp" prefWidth="150"/>
                                <TableColumn fx:id="activityActorColumn" text="Actor" prefWidth="130"/>
                                <TableColumn fx:id="activityActionColumn" text="Action" prefWidth="120"/>
                                <TableColumn fx:id="activityEntityColumn" text="Entity" prefWidth="120"/>
                                <TableColumn fx:id="activityMessageColumn" text="Message" prefWidth="240"/>
                            </columns>
                        </TableView>
                        <HBox spacing="8">
                            <Button text="Export CSV" onAction="#exportActivityCsv"/>
                            <Button text="Export TXT" onAction="#exportActivityTxt"/>
                        </HBox>
                    </VBox>
                </Tab>
            </tabs>
        </TabPane>
    </center>
</BorderPane>
